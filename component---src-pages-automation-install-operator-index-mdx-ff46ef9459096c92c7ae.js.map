{"version":3,"sources":["webpack:///./src/pages/automation/install-operator/index.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"yeAMO,IAAMA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,KAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,8LAEA,kDACA,6JACwC,0BAAYC,WAAW,KAAvB,QADxC,oCAEA,sBACE,kBAAIA,WAAW,MAAf,2BAEF,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,wCAEL,sBACE,kBAAIA,WAAW,MAAf,kDAEF,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,+EAGL,gDACA,sBACE,kBAAIA,WAAW,MAAf,2EAAgG,0BAAYA,WAAW,MAAvB,eAAhG,kHAEF,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,uOAIL,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,aAAiC,mBAAGA,WAAW,KAAQ,CACnD,KAAQ,wDACP,0BAAYA,WAAW,KAAvB,4BAFL,+FAE4K,0BAAYA,WAAW,KAAvB,YAF5K,QAEyO,0BAAYA,WAAW,KAAvB,cAFzO,uCAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,oBAGJ,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,4CAEL,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,aAAiC,mBAAGA,WAAW,KAAQ,CACnD,KAAQ,yDACP,0BAAYA,WAAW,KAAvB,6BAFL,+FAE6K,0BAAYA,WAAW,KAAvB,sBAF7K,eAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,qBAGJ,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,6CAEL,6CACA,sBACE,kBAAIA,WAAW,MAAf,0FAEF,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,+DAEL,sBACE,kBAAIA,WAAW,MAAf,wDAA6E,0BAAYA,WAAW,MAAvB,qBAA7E,gBAA4J,0BAAYA,WAAW,MAAvB,qBAA5J,aAEF,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,kHAGL,sBACE,kBAAIA,WAAW,MAAf,4DAAiF,0BAAYA,WAAW,MAAvB,qBAAjF,gBAAgK,0BAAYA,WAAW,MAAvB,qBAAhK,aAEF,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,mHAGL,8BAAa,0BAAYA,WAAW,KAAvB,kBAAb,wEACA,sBACE,kBAAIA,WAAW,MAAf,yCAEF,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,oKAQTJ,EAAWK,gBAAiB","file":"component---src-pages-automation-install-operator-index-mdx-ff46ef9459096c92c7ae.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/ibm-cloud-architecture/cloudpak8s/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`Starting with version 19.0.3, the Cloud Pak for Automation components install is supported by an OCP operator.\nThe install steps for the operator are the following.`}</p>\n    <h3>{`Create your CP4A project`}</h3>\n    <p>{`Your CP4A project will contain all the components that are deployed through the operator.\nIn the rest of this documentation, we use `}<inlineCode parentName=\"p\">{`cp4a`}</inlineCode>{` as the name of our OCP project.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Login to your cluster:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`oc login -u <admin> -p <password>\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Create the project and add privileges to it. `}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`oc new-project cp4a\noc adm policy add-scc-to-user privileged -z default\n`}</code></pre>\n    <h3>{`Prepare the PV and PVC`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`On the NFS server, under the root of an exported directory (look at the `}<inlineCode parentName=\"li\">{`/etc/export`}</inlineCode>{` file to view the exported directories), create a folder for the JDBC drivers and copy these drivers into it:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`mkdir /storage/persistentvolumes/operator/jdbc/db2\ncp /opt/ibm/db2/V11.1/java/db2jcc4.jar /nfs/persistentvolumes/operator/jdbc/db2/\ncp /opt/ibm/db2/V11.1/java/db2jcc_license_cu.jar /nfs/persistentvolumes/operator/jdbc/db2/\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Copy this `}<a parentName=\"p\" {...{\n            \"href\": \"/assets/automation/operator/operator-shared-pv.yaml\"\n          }}><inlineCode parentName=\"a\">{`operator-shared-pv.yaml`}</inlineCode></a>{` template file to your working directory and update it as needed. In particular, update the `}<inlineCode parentName=\"p\">{`nfs:path`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`nfs:server`}</inlineCode>{` properties to fit your NFS setup.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Deploy the PV:`}</p>\n      </li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc apply -f operator-shared-pv.yaml\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Copy this `}<a parentName=\"p\" {...{\n            \"href\": \"/assets/automation/operator/operator-shared-pvc.yaml\"\n          }}><inlineCode parentName=\"a\">{`operator-shared-pvc.yaml`}</inlineCode></a>{` template file to your working directory and update it as needed. In particular, update the `}<inlineCode parentName=\"p\">{`metadata:namespace`}</inlineCode>{` property.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Deploy the PVC:`}</p>\n      </li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc apply -f operator-shared-pvc.yaml\n`}</code></pre>\n    <h3>{`Deploy the operator`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`In your working directory, download the necessary scripts and Kubernetes descriptors:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`$ git clone https://github.com/icp4a/cert-kubernetes.git\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`If you are using local registry, change directory to `}<inlineCode parentName=\"li\">{`./cert-kubernetes`}</inlineCode>{` and run the `}<inlineCode parentName=\"li\">{`deployOperator.sh`}</inlineCode>{` script:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`cd cert-kubernetes/\n./scripts/deployOperator.sh -i $(oc registry info)/cp4a-operator/icp4a-operator:19.0.3\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`If you are using IBM Cloud registry, change directory to `}<inlineCode parentName=\"li\">{`./cert-kubernetes`}</inlineCode>{` and run the `}<inlineCode parentName=\"li\">{`deployOperator.sh`}</inlineCode>{` script:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`cd cert-kubernetes/\n./scripts/deployOperator.sh cp.icr.io/cp/cp4a/icp4a-operator:19.0.3 -p 'cp-entitlement'\n`}</code></pre>\n    <p>{`where `}<inlineCode parentName=\"p\">{`cp-entitlement`}</inlineCode>{` is the name of the secret created to access to the remote registry.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Verify that the operator is running:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`oc get pods\nNAME                                 READY     STATUS    RESTARTS   AGE\nibm-cp4a-operator-7db5cfbb64-mgb2c   2/2       Running   0          5h\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}