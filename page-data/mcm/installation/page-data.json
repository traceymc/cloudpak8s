{"componentChunkName":"component---src-pages-mcm-installation-index-mdx","path":"/mcm/installation/","result":{"pageContext":{"frontmatter":{"title":"Cloud Pak for MCM 2.0 Installation","description":"Installation guide for installing CP4MCM core components","keywords":"ibm,install,mcm, cp4mcm"},"relativePagePath":"/mcm/installation/index.mdx","titleType":"page","MdxNode":{"id":"c02135ac-ce51-54ec-b506-a3fe7d160545","children":[],"parent":"c6d0efee-f540-53a8-8681-077982f5a84b","internal":{"content":"---\ntitle: Cloud Pak for MCM 2.0 Installation\ndescription: Installation guide for installing CP4MCM core components\nkeywords: 'ibm,install,mcm, cp4mcm'\n---\n\nThis section describes the installation of the core components of Cloud\nPak for Multicloud Management 2.0. This version is supported on OpenShift\n4.3 or 4.4 at the time of this update. Please continue to check the \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/SSFC4F_2.0.0/install/supported_os.html)\ndocumentation in case this has changed before your installation. The Cloud\nplatform used to test and document the installation here is OpenShift on \nIBM Cloud (ROKS), specifically an OpenShift 4.4 cluster. However, since \nOpenShift 4.3. and 4.4 are available on a variety of platforms, the \ninstructions should be valid on whatever on-premise or cloud platform \nwhere you are running OpenShift supported versions.\n\nThe installation of the Cloud Pak is well documented in the \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/online_install.html).\nThe installation process documented there uses a mix of the Openshift UI \nand the command line. You will be successful by carefully following\n[these instructions](https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/online_install.html).\n\nAs an alternative, this section of the Cloud Pak Playbook describes an \ninstallation exclusively using the command line. With this approach, it \nis possible to automate the installation by incorporating these commands\ninto shell scripts.\n\n<InlineNotification>\n\nThe syntax of the\ncommands in this description was correct at the time of writing. \nHowever, command syntax often changes over time for various reasons.\nIf you \nexperience a command syntax error, please check the IBM Knowledge Center\nor Red Hat OpenShift documentation for the latest syntax and adjust \naccordingly. If thtat does\nnot solve the problem, the authors of this section will respond on a best\nefforts basis if you \n[open a github issue](https://github.com/ibm-cloud-architecture/cloudpak8s/issues).\n\n</InlineNotification>\n\n<AnchorLinks>\n  <AnchorLink>Preparing your installation</AnchorLink>\n  <AnchorLink>Online Installation</AnchorLink>\n  <AnchorLink>Offline Installation</AnchorLink>\n  <AnchorLink>Uninstall</AnchorLink>\n</AnchorLinks>\n\n## Prerequisites\n\nThis document does not describe how to install or configure the \nunderlying OpenShift cluster. Prior to installing, make sure you have \na working OpenShift cluster with the [required capacity](/mcm/requirements/).\n\n- For online installs make sure you have an entitlement key from \n[MyIBM Container Software Library](https://myibm.ibm.com/products-services/containerlibrary)\nto access the installation images. Log in to this site with your IBMid. You can then\ncopy your entitlement key into your buffer. It will be required during the installation.\n- The installation is performed from the Command line (CLI) so you will \nneed the required OpenShift CLI tools to interface with the cluster. The current OpenShift\ncommand line can be downloaded from \n[this site](https://mirror.openshift.com/pub/openshift-v4/clients/).\n- Offline installation will require the docker client install on the \ninstallation server\n\n<ul>\n</ul>\n\n## Overall Installation Process\n\nThe major advancement and difference in the Cloud Pak for Multicloud Management 2.0 product is\nthat the installation is now performed by OpenShift operators. These operators are responsible\nfor the initial installation of the product components, and for the ongoing health, care and \nfeeding of those components.\n\nThe cluster used for this example installation has 5 worker nodes, each with 16 vCPUs and\n64 GBs memory. As stated before, it is running on the Red Hat OpenShift on IBM Cloud (ROKS) public\ncloud. \n\n## Online Installation\n\nIn the online installation, we will first set up a number of environment variables, then install\nIBM Common Services, and finally install the Cloud Pak for Multicloud Management core components.\n\n### **Set up necessary Environment variables**\n\n1. Log in to \n[MyIBM Container Software Library](https://myibm.ibm.com/products-services/containerlibrary) \nwith your IBMid and password.\nIn the Entitlement keys section, copy the entitlement key to your buffer.\n\n2. In your command line, paste this entitlement key into an environment variable.\n\n```bash\nexport ENTITLED_REGISTRY_KEY=\"<Paste Your Entitlement Key>\"\n```\n\n3. Define the other environment variables you will need for the core MCM component installation.\n\n```bash\nexport ENTITLED_REGISTRY=\"cp.icr.io\"\nexport ENTITLED_REGISTRY_SECRET=\"ibm-management-pull-secret\"\nexport DOCKER_EMAIL=\"<Your Docker ID email>\"\nexport CP4MCM_NAMESPACE=\"cp4m\"\nexport CP4MCM_BLOCK_STORAGECLASS=\"ibmc-block-gold\"\nexport CP4MCM_FILE_STORAGECLASS=\"ibmc-file-gold\"\nexport CP4MCM_FILE_GID_STORAGECLASS=\"ibmc-file-gold-gid\"\n```\n\nThe value of `ENTITLED_REGISTRY` points to IBM's registry containing the software images. The values\nof the `ENTITLED_REGISTRY_SECRET` and `CP4MCM_NAMESPACE` are arbitrary. You can use different \nvalues if you want. The `...STORAGECLASS` variables are populated based on the storage classes\navailable in the OpenShift cluster. The storage classes you have available will vary based on\nthe platform on which you are running your MCM OpenShift cluster. \nTo find the available storage classes in your cluster, enter \nthe command `oc get sc`.\n\n4. Go to your OpenShift Cluster UI, and log in to your cluster. From the pull-down menu in \nthe top right corner, click `Copy Login Command`, then click `Display Token`. Copy the command\nline under `Log in with this token`, paste it into your command line and Enter to log in to your \ncluster. The command line is in the form:\n\n```bash\noc login --token=<your_token> --server=<SERVER_URL>\n```\n\n### **Import the CatalogSource for IBM Common Services**\n\n<InlineNotification>\nFor each of the commands in the following sections, it is recommended to wait a length of\ntime for each of these commands to fully complete before moving on to the next one. From \nour experience, we recommend a wait time of 3 minutes from the return of one command to\nwhen you should enter the next command.\n</InlineNotification>\n\n4. Enter the following command:\n\n```bash\noc create -f - <<EOF\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: opencloud-operators\n  namespace: openshift-marketplace\nspec:\n  displayName: IBMCS Operators\n  publisher: IBM\n  sourceType: grpc\n  image: docker.io/ibmcom/ibm-common-service-catalog:latest\n  updateStrategy:\n    registryPoll:\n      interval: 45m\nEOF\n```\n\n   You should see the following response.\n\n   ```\n   catalogsource.operators.coreos.com/opencloud-operators created\n   ```\n\n### **Import the CatalogSource for Cloud Pak for Multicloud Management**\n\n5. Create tne namespace for CP for MCM.\n\n```bash\noc new-project $CP4MCM_NAMESPACE\n```\n\n6. Create the entitled registry secret for the installation.\n\n```bash\noc create secret docker-registry $ENTITLED_REGISTRY_SECRET --docker-username=cp --docker-password=$ENTITLED_REGISTRY_KEY --docker-email=$DOCKER_EMAIL --docker-server=$ENTITLED_REGISTRY -n $CP4MCM_NAMESPACE\n```\n\n7. Import the CatalogSource for CloudPak for Multicloud Management.\n\n```bash\noc create -f - <<EOF\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: management-installer-index\n  namespace: openshift-marketplace\nspec:\n  displayName: CP4MCM Installer Catalog\n  publisher: IBM CP4MCM\n  sourceType: grpc\n  image: quay.io/cp4mcm/cp4mcm-orchestrator-catalog:2.0.0\n  updateStrategy:\n    registryPoll:\n      interval: 45m\n  secrets:\n   - $ENTITLED_REGISTRY_SECRET\nEOF\n```\n\n   You should see a response like this.\n\n   ```bash\n   catalogsource.operators.coreos.com/management-installer-index created\n   ```\n\n### **Create the Cloud Pak for MCM Subscription**\n\n8. Enter the following command to create the subscription for Cloud Pak for MCM.\n\n```bash\ncat << EOF | oc apply -f -\napiVersion: operators.coreos.com/v1alpha1\nkind: Subscription\nmetadata:\n  name: ibm-management-orchestrator\n  namespace: openshift-operators\nspec:\n  channel: 2.0-stable\n  installPlanApproval: Automatic\n  name: ibm-management-orchestrator\n  source: management-installer-index\n  sourceNamespace: openshift-marketplace\n  startingCSV: ibm-management-orchestrator.v2.0.0\nEOF\n```\n\n   You should see a response like this.\n\n   ```bash\n   subscription.operators.coreos.com/ibm-management-orchestrator created\n   ```\n\n### **Create the Cloud Pak for MCM Core Components Installation**\n\n9. Enter the following command to trigger the operator to install Cloud Pak for MCM.\n\n```bash\ncat << EOF | oc apply -f -\napiVersion: orchestrator.management.ibm.com/v1alpha1\nkind: Installation\nmetadata:\n  name: ibm-management\n  namespace: $CP4MCM_NAMESPACE\nspec:\n  storageClass: $CP4MCM_BLOCK_STORAGECLASS\n  imagePullSecret: $ENTITLED_REGISTRY_SECRET\n  license:\n    accept: true\n  mcmCoreDisabled: false\n  pakModules:\n    - config:\n        - enabled: true\n          name: ibm-management-im-install\n          spec: {}\n        - enabled: true\n          name: ibm-management-infra-grc\n          spec: {}\n        - enabled: true\n          name: ibm-management-infra-vm\n          spec: {}\n        - enabled: true\n          name: ibm-management-cam-install\n          spec: {}\n        - enabled: true\n          name: ibm-management-service-library\n          spec: {}\n      enabled: false\n      name: infrastructureManagement\n    - config:\n        - enabled: true\n          name: ibm-management-monitoring\n          spec:\n            operandRequest: {}\n            monitoringDeploy:\n              global:\n                environmentSize: size0\n                persistence:\n                  storageClassOption:\n                    cassandrabak: none\n                    cassandradata: default\n                    couchdbdata: default\n                    datalayerjobs: default\n                    elasticdata: default\n                    kafkadata: default\n                    zookeeperdata: default\n                  storageSize:\n                    cassandrabak: 50Gi\n                    cassandradata: 50Gi\n                    couchdbdata: 5Gi\n                    datalayerjobs: 5Gi\n                    elasticdata: 5Gi\n                    kafkadata: 10Gi\n                    zookeeperdata: 1Gi\n      enabled: false\n      name: monitoring\n    - config:\n        - enabled: true\n          name: ibm-management-notary\n          spec: {}\n        - enabled: true\n          name: ibm-management-image-security-enforcement\n          spec: {}\n        - enabled: false\n          name: ibm-management-mutation-advisor\n          spec: {}\n        - enabled: false\n          name: ibm-management-vulnerability-advisor\n          spec:\n            controlplane:\n              esSecurityEnabled: true\n              esServiceName: elasticsearch.ibm-common-services\n              esSecretName: logging-elk-certs\n              esSecretCA: ca.crt\n              esSecretCert: curator.crt\n              esSecretKey: curator.key\n            annotator:\n              esSecurityEnabled: true\n              esServiceName: elasticsearch.ibm-common-services\n              esSecretName: logging-elk-certs\n              esSecretCA: ca.crt\n              esSecretCert: curator.crt\n              esSecretKey: curator.key\n            indexer:\n              esSecurityEnabled: true\n              esServiceName: elasticsearch.ibm-common-services\n              esSecretName: logging-elk-certs\n              esSecretCA: ca.crt\n              esSecretCert: curator.crt\n              esSecretKey: curator.key\n      enabled: false\n      name: securityServices\n    - config:\n        - enabled: true\n          name: ibm-management-sre-chatops\n          spec: {}\n      enabled: false\n      name: operations\n    - config:\n        - enabled: true\n          name: ibm-management-manage-runtime\n          spec: {}\n      enabled: false\n      name: techPreview\nEOF\n```\n\n   If you look at the YAML embedded in this command, you see that there are stanzas for each\n   of the addtional capabilities of the Cloud Pak beyond the core. Toward the end of each \n   stanza there is an `enabled: false` parameter. This causes only the core components to be\n   installed. To install additional components later, this YAML is updated to enable the\n   additional components.\n   \n   You should see a response like this.\n\n   ```bash\n   installation.orchestrator.management.ibm.com/ibm-management created\n   ```\n\n   This means that the installation of Cloud Pak for MCM core components has begun, under the\n   control of the operator.\n\n10. To track the progress of the installation, enter the command `oc get opreq -A`. While the \ninstallation is running, the command and responses will look like this.\n\n```bash\nMBP:dtmcm03 $ oc get opreq -A\nNAMESPACE             NAME                                         AGE   PHASE     CREATED AT\ncp4m                  ibm-management-cs                            33m   Running   2020-09-25T22:02:06Z\ncp4m                  ibm-management-foundation                    33m   Running   2020-09-25T22:02:07Z\nibm-common-services   catalog-ui-request                           31m   Running   2020-09-25T22:04:11Z\nibm-common-services   helm-api-request                             30m   Running   2020-09-25T22:05:10Z\nibm-common-services   helm-repo-request                            30m   Running   2020-09-25T22:05:10Z\nibm-common-services   ibm-commonui-request                         31m   Running   2020-09-25T22:04:11Z\nibm-common-services   ibm-iam-request                              32m   Running   2020-09-25T22:03:30Z\nibm-common-services   ibm-metering-request                         31m   Running   2020-09-25T22:04:10Z\nibm-common-services   ibm-mongodb-request                          31m   Running   2020-09-25T22:04:30Z\nibm-common-services   management-ingress                           32m   Running   2020-09-25T22:03:30Z\nibm-common-services   monitoring-exporters-operator-request        32m   Running   2020-09-25T22:03:30Z\nibm-common-services   monitoring-grafana-operator-request          32m   Running   2020-09-25T22:03:30Z\nibm-common-services   monitoring-prometheus-ext-operator-request   32m   Running   2020-09-25T22:03:30Z\nibm-common-services   platform-api-request                         31m   Running   2020-09-25T22:04:11Z\nkube-system           ibm-license-advisor-sender-instance          31m   Running   2020-09-25T22:04:43Z\n```\n\n   The installation will be finished when all the pods for the Cloud Pak have started successfully.\n   This command will report these pods that are not yet in the `Running` or `Completed` states yet.\n\n   ```bash\n   oc get po --no-headers=true -A | grep -v 'Running\\|Completed\\|gateway-kong' | grep 'kube-system\\|ibm-common-services\\|management-infrastructure-management\\|management-monitoring\\|management-operations\\|management-security-services'\n   ```\n\n11. After all the pods have completed, you can enter the following command to get the URL\nfor your Cloud Pak for MCM console. \n\n```bash\noc -n ibm-common-services get route cp-console --template '{{.spec.host}}'\n```\n\n   The result should look like this.\n\n   ```bash\n   cp-console.dtmcm10-6ccd7f378ae819553d37d5f2ee142bd6-0000.us-south.containers.appdomain.cloud\n   ```\n\n   Copy the result of this command and paste it into a browser to go to the Cloud Pak console.\n\n![Cloud Pak Console Pre Login](./images/01-CPConsolePreLogin.png)\n\n   Click `Default authentication` to get to the login panel.\n\n12. The default administrator id for the Cloud Pak is `admin`. To get the `admin` password, \ngo back to your command line and enter the following command.\n\n```bash\noc -n ibm-common-services get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_password}' | base64 -d\n```\n\n   Copy the result of this command and paste it into the `Password` field of the login panel to\n   log in to the Cloud Pak Console. Log in with User ID `admin` and the password you have pasted.\n   The top part of the Cloud Pak Console looks like this.\n\n![Cloud Pak Console Post Login](./images/02-CPConsolePostLogin.png)\n\nThe installation of the Cloud Pak for Multicloud Management core components is now complete.\n\n\n## Offline Installation\n\nThe Offline or Airgap installation method for Cloud Pak for Multicloud Management 2.0 is \nwell documented in the \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/install_cp_airgap_bastion.html).\n\nAt this time we do not have any updates or alternatives to what is documented there.\n\n## Uninstall\n\nThe documentation on how to uninstall Cloud Pak for Multicloud Management 2.0 can be \nfound in the\n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/uninstall.html)\ndocumentation. \n\nIf and when we can test a more stream-lined method, we will update this section.\n\n## Additional Resources\n* <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/overview.html\">IBM Knowledge Center - Cloud Pak for MCM 2.0 Installation</a>\n","type":"Mdx","contentDigest":"d5be08789b798fe28b145709f319f7f3","counter":635,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Cloud Pak for MCM 2.0 Installation","description":"Installation guide for installing CP4MCM core components","keywords":"ibm,install,mcm, cp4mcm"},"exports":{},"rawBody":"---\ntitle: Cloud Pak for MCM 2.0 Installation\ndescription: Installation guide for installing CP4MCM core components\nkeywords: 'ibm,install,mcm, cp4mcm'\n---\n\nThis section describes the installation of the core components of Cloud\nPak for Multicloud Management 2.0. This version is supported on OpenShift\n4.3 or 4.4 at the time of this update. Please continue to check the \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/SSFC4F_2.0.0/install/supported_os.html)\ndocumentation in case this has changed before your installation. The Cloud\nplatform used to test and document the installation here is OpenShift on \nIBM Cloud (ROKS), specifically an OpenShift 4.4 cluster. However, since \nOpenShift 4.3. and 4.4 are available on a variety of platforms, the \ninstructions should be valid on whatever on-premise or cloud platform \nwhere you are running OpenShift supported versions.\n\nThe installation of the Cloud Pak is well documented in the \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/online_install.html).\nThe installation process documented there uses a mix of the Openshift UI \nand the command line. You will be successful by carefully following\n[these instructions](https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/online_install.html).\n\nAs an alternative, this section of the Cloud Pak Playbook describes an \ninstallation exclusively using the command line. With this approach, it \nis possible to automate the installation by incorporating these commands\ninto shell scripts.\n\n<InlineNotification>\n\nThe syntax of the\ncommands in this description was correct at the time of writing. \nHowever, command syntax often changes over time for various reasons.\nIf you \nexperience a command syntax error, please check the IBM Knowledge Center\nor Red Hat OpenShift documentation for the latest syntax and adjust \naccordingly. If thtat does\nnot solve the problem, the authors of this section will respond on a best\nefforts basis if you \n[open a github issue](https://github.com/ibm-cloud-architecture/cloudpak8s/issues).\n\n</InlineNotification>\n\n<AnchorLinks>\n  <AnchorLink>Preparing your installation</AnchorLink>\n  <AnchorLink>Online Installation</AnchorLink>\n  <AnchorLink>Offline Installation</AnchorLink>\n  <AnchorLink>Uninstall</AnchorLink>\n</AnchorLinks>\n\n## Prerequisites\n\nThis document does not describe how to install or configure the \nunderlying OpenShift cluster. Prior to installing, make sure you have \na working OpenShift cluster with the [required capacity](/mcm/requirements/).\n\n- For online installs make sure you have an entitlement key from \n[MyIBM Container Software Library](https://myibm.ibm.com/products-services/containerlibrary)\nto access the installation images. Log in to this site with your IBMid. You can then\ncopy your entitlement key into your buffer. It will be required during the installation.\n- The installation is performed from the Command line (CLI) so you will \nneed the required OpenShift CLI tools to interface with the cluster. The current OpenShift\ncommand line can be downloaded from \n[this site](https://mirror.openshift.com/pub/openshift-v4/clients/).\n- Offline installation will require the docker client install on the \ninstallation server\n\n<ul>\n</ul>\n\n## Overall Installation Process\n\nThe major advancement and difference in the Cloud Pak for Multicloud Management 2.0 product is\nthat the installation is now performed by OpenShift operators. These operators are responsible\nfor the initial installation of the product components, and for the ongoing health, care and \nfeeding of those components.\n\nThe cluster used for this example installation has 5 worker nodes, each with 16 vCPUs and\n64 GBs memory. As stated before, it is running on the Red Hat OpenShift on IBM Cloud (ROKS) public\ncloud. \n\n## Online Installation\n\nIn the online installation, we will first set up a number of environment variables, then install\nIBM Common Services, and finally install the Cloud Pak for Multicloud Management core components.\n\n### **Set up necessary Environment variables**\n\n1. Log in to \n[MyIBM Container Software Library](https://myibm.ibm.com/products-services/containerlibrary) \nwith your IBMid and password.\nIn the Entitlement keys section, copy the entitlement key to your buffer.\n\n2. In your command line, paste this entitlement key into an environment variable.\n\n```bash\nexport ENTITLED_REGISTRY_KEY=\"<Paste Your Entitlement Key>\"\n```\n\n3. Define the other environment variables you will need for the core MCM component installation.\n\n```bash\nexport ENTITLED_REGISTRY=\"cp.icr.io\"\nexport ENTITLED_REGISTRY_SECRET=\"ibm-management-pull-secret\"\nexport DOCKER_EMAIL=\"<Your Docker ID email>\"\nexport CP4MCM_NAMESPACE=\"cp4m\"\nexport CP4MCM_BLOCK_STORAGECLASS=\"ibmc-block-gold\"\nexport CP4MCM_FILE_STORAGECLASS=\"ibmc-file-gold\"\nexport CP4MCM_FILE_GID_STORAGECLASS=\"ibmc-file-gold-gid\"\n```\n\nThe value of `ENTITLED_REGISTRY` points to IBM's registry containing the software images. The values\nof the `ENTITLED_REGISTRY_SECRET` and `CP4MCM_NAMESPACE` are arbitrary. You can use different \nvalues if you want. The `...STORAGECLASS` variables are populated based on the storage classes\navailable in the OpenShift cluster. The storage classes you have available will vary based on\nthe platform on which you are running your MCM OpenShift cluster. \nTo find the available storage classes in your cluster, enter \nthe command `oc get sc`.\n\n4. Go to your OpenShift Cluster UI, and log in to your cluster. From the pull-down menu in \nthe top right corner, click `Copy Login Command`, then click `Display Token`. Copy the command\nline under `Log in with this token`, paste it into your command line and Enter to log in to your \ncluster. The command line is in the form:\n\n```bash\noc login --token=<your_token> --server=<SERVER_URL>\n```\n\n### **Import the CatalogSource for IBM Common Services**\n\n<InlineNotification>\nFor each of the commands in the following sections, it is recommended to wait a length of\ntime for each of these commands to fully complete before moving on to the next one. From \nour experience, we recommend a wait time of 3 minutes from the return of one command to\nwhen you should enter the next command.\n</InlineNotification>\n\n4. Enter the following command:\n\n```bash\noc create -f - <<EOF\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: opencloud-operators\n  namespace: openshift-marketplace\nspec:\n  displayName: IBMCS Operators\n  publisher: IBM\n  sourceType: grpc\n  image: docker.io/ibmcom/ibm-common-service-catalog:latest\n  updateStrategy:\n    registryPoll:\n      interval: 45m\nEOF\n```\n\n   You should see the following response.\n\n   ```\n   catalogsource.operators.coreos.com/opencloud-operators created\n   ```\n\n### **Import the CatalogSource for Cloud Pak for Multicloud Management**\n\n5. Create tne namespace for CP for MCM.\n\n```bash\noc new-project $CP4MCM_NAMESPACE\n```\n\n6. Create the entitled registry secret for the installation.\n\n```bash\noc create secret docker-registry $ENTITLED_REGISTRY_SECRET --docker-username=cp --docker-password=$ENTITLED_REGISTRY_KEY --docker-email=$DOCKER_EMAIL --docker-server=$ENTITLED_REGISTRY -n $CP4MCM_NAMESPACE\n```\n\n7. Import the CatalogSource for CloudPak for Multicloud Management.\n\n```bash\noc create -f - <<EOF\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: management-installer-index\n  namespace: openshift-marketplace\nspec:\n  displayName: CP4MCM Installer Catalog\n  publisher: IBM CP4MCM\n  sourceType: grpc\n  image: quay.io/cp4mcm/cp4mcm-orchestrator-catalog:2.0.0\n  updateStrategy:\n    registryPoll:\n      interval: 45m\n  secrets:\n   - $ENTITLED_REGISTRY_SECRET\nEOF\n```\n\n   You should see a response like this.\n\n   ```bash\n   catalogsource.operators.coreos.com/management-installer-index created\n   ```\n\n### **Create the Cloud Pak for MCM Subscription**\n\n8. Enter the following command to create the subscription for Cloud Pak for MCM.\n\n```bash\ncat << EOF | oc apply -f -\napiVersion: operators.coreos.com/v1alpha1\nkind: Subscription\nmetadata:\n  name: ibm-management-orchestrator\n  namespace: openshift-operators\nspec:\n  channel: 2.0-stable\n  installPlanApproval: Automatic\n  name: ibm-management-orchestrator\n  source: management-installer-index\n  sourceNamespace: openshift-marketplace\n  startingCSV: ibm-management-orchestrator.v2.0.0\nEOF\n```\n\n   You should see a response like this.\n\n   ```bash\n   subscription.operators.coreos.com/ibm-management-orchestrator created\n   ```\n\n### **Create the Cloud Pak for MCM Core Components Installation**\n\n9. Enter the following command to trigger the operator to install Cloud Pak for MCM.\n\n```bash\ncat << EOF | oc apply -f -\napiVersion: orchestrator.management.ibm.com/v1alpha1\nkind: Installation\nmetadata:\n  name: ibm-management\n  namespace: $CP4MCM_NAMESPACE\nspec:\n  storageClass: $CP4MCM_BLOCK_STORAGECLASS\n  imagePullSecret: $ENTITLED_REGISTRY_SECRET\n  license:\n    accept: true\n  mcmCoreDisabled: false\n  pakModules:\n    - config:\n        - enabled: true\n          name: ibm-management-im-install\n          spec: {}\n        - enabled: true\n          name: ibm-management-infra-grc\n          spec: {}\n        - enabled: true\n          name: ibm-management-infra-vm\n          spec: {}\n        - enabled: true\n          name: ibm-management-cam-install\n          spec: {}\n        - enabled: true\n          name: ibm-management-service-library\n          spec: {}\n      enabled: false\n      name: infrastructureManagement\n    - config:\n        - enabled: true\n          name: ibm-management-monitoring\n          spec:\n            operandRequest: {}\n            monitoringDeploy:\n              global:\n                environmentSize: size0\n                persistence:\n                  storageClassOption:\n                    cassandrabak: none\n                    cassandradata: default\n                    couchdbdata: default\n                    datalayerjobs: default\n                    elasticdata: default\n                    kafkadata: default\n                    zookeeperdata: default\n                  storageSize:\n                    cassandrabak: 50Gi\n                    cassandradata: 50Gi\n                    couchdbdata: 5Gi\n                    datalayerjobs: 5Gi\n                    elasticdata: 5Gi\n                    kafkadata: 10Gi\n                    zookeeperdata: 1Gi\n      enabled: false\n      name: monitoring\n    - config:\n        - enabled: true\n          name: ibm-management-notary\n          spec: {}\n        - enabled: true\n          name: ibm-management-image-security-enforcement\n          spec: {}\n        - enabled: false\n          name: ibm-management-mutation-advisor\n          spec: {}\n        - enabled: false\n          name: ibm-management-vulnerability-advisor\n          spec:\n            controlplane:\n              esSecurityEnabled: true\n              esServiceName: elasticsearch.ibm-common-services\n              esSecretName: logging-elk-certs\n              esSecretCA: ca.crt\n              esSecretCert: curator.crt\n              esSecretKey: curator.key\n            annotator:\n              esSecurityEnabled: true\n              esServiceName: elasticsearch.ibm-common-services\n              esSecretName: logging-elk-certs\n              esSecretCA: ca.crt\n              esSecretCert: curator.crt\n              esSecretKey: curator.key\n            indexer:\n              esSecurityEnabled: true\n              esServiceName: elasticsearch.ibm-common-services\n              esSecretName: logging-elk-certs\n              esSecretCA: ca.crt\n              esSecretCert: curator.crt\n              esSecretKey: curator.key\n      enabled: false\n      name: securityServices\n    - config:\n        - enabled: true\n          name: ibm-management-sre-chatops\n          spec: {}\n      enabled: false\n      name: operations\n    - config:\n        - enabled: true\n          name: ibm-management-manage-runtime\n          spec: {}\n      enabled: false\n      name: techPreview\nEOF\n```\n\n   If you look at the YAML embedded in this command, you see that there are stanzas for each\n   of the addtional capabilities of the Cloud Pak beyond the core. Toward the end of each \n   stanza there is an `enabled: false` parameter. This causes only the core components to be\n   installed. To install additional components later, this YAML is updated to enable the\n   additional components.\n   \n   You should see a response like this.\n\n   ```bash\n   installation.orchestrator.management.ibm.com/ibm-management created\n   ```\n\n   This means that the installation of Cloud Pak for MCM core components has begun, under the\n   control of the operator.\n\n10. To track the progress of the installation, enter the command `oc get opreq -A`. While the \ninstallation is running, the command and responses will look like this.\n\n```bash\nMBP:dtmcm03 $ oc get opreq -A\nNAMESPACE             NAME                                         AGE   PHASE     CREATED AT\ncp4m                  ibm-management-cs                            33m   Running   2020-09-25T22:02:06Z\ncp4m                  ibm-management-foundation                    33m   Running   2020-09-25T22:02:07Z\nibm-common-services   catalog-ui-request                           31m   Running   2020-09-25T22:04:11Z\nibm-common-services   helm-api-request                             30m   Running   2020-09-25T22:05:10Z\nibm-common-services   helm-repo-request                            30m   Running   2020-09-25T22:05:10Z\nibm-common-services   ibm-commonui-request                         31m   Running   2020-09-25T22:04:11Z\nibm-common-services   ibm-iam-request                              32m   Running   2020-09-25T22:03:30Z\nibm-common-services   ibm-metering-request                         31m   Running   2020-09-25T22:04:10Z\nibm-common-services   ibm-mongodb-request                          31m   Running   2020-09-25T22:04:30Z\nibm-common-services   management-ingress                           32m   Running   2020-09-25T22:03:30Z\nibm-common-services   monitoring-exporters-operator-request        32m   Running   2020-09-25T22:03:30Z\nibm-common-services   monitoring-grafana-operator-request          32m   Running   2020-09-25T22:03:30Z\nibm-common-services   monitoring-prometheus-ext-operator-request   32m   Running   2020-09-25T22:03:30Z\nibm-common-services   platform-api-request                         31m   Running   2020-09-25T22:04:11Z\nkube-system           ibm-license-advisor-sender-instance          31m   Running   2020-09-25T22:04:43Z\n```\n\n   The installation will be finished when all the pods for the Cloud Pak have started successfully.\n   This command will report these pods that are not yet in the `Running` or `Completed` states yet.\n\n   ```bash\n   oc get po --no-headers=true -A | grep -v 'Running\\|Completed\\|gateway-kong' | grep 'kube-system\\|ibm-common-services\\|management-infrastructure-management\\|management-monitoring\\|management-operations\\|management-security-services'\n   ```\n\n11. After all the pods have completed, you can enter the following command to get the URL\nfor your Cloud Pak for MCM console. \n\n```bash\noc -n ibm-common-services get route cp-console --template '{{.spec.host}}'\n```\n\n   The result should look like this.\n\n   ```bash\n   cp-console.dtmcm10-6ccd7f378ae819553d37d5f2ee142bd6-0000.us-south.containers.appdomain.cloud\n   ```\n\n   Copy the result of this command and paste it into a browser to go to the Cloud Pak console.\n\n![Cloud Pak Console Pre Login](./images/01-CPConsolePreLogin.png)\n\n   Click `Default authentication` to get to the login panel.\n\n12. The default administrator id for the Cloud Pak is `admin`. To get the `admin` password, \ngo back to your command line and enter the following command.\n\n```bash\noc -n ibm-common-services get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_password}' | base64 -d\n```\n\n   Copy the result of this command and paste it into the `Password` field of the login panel to\n   log in to the Cloud Pak Console. Log in with User ID `admin` and the password you have pasted.\n   The top part of the Cloud Pak Console looks like this.\n\n![Cloud Pak Console Post Login](./images/02-CPConsolePostLogin.png)\n\nThe installation of the Cloud Pak for Multicloud Management core components is now complete.\n\n\n## Offline Installation\n\nThe Offline or Airgap installation method for Cloud Pak for Multicloud Management 2.0 is \nwell documented in the \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/install_cp_airgap_bastion.html).\n\nAt this time we do not have any updates or alternatives to what is documented there.\n\n## Uninstall\n\nThe documentation on how to uninstall Cloud Pak for Multicloud Management 2.0 can be \nfound in the\n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/uninstall.html)\ndocumentation. \n\nIf and when we can test a more stream-lined method, we will update this section.\n\n## Additional Resources\n* <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSFC4F_2.0.0/install/overview.html\">IBM Knowledge Center - Cloud Pak for MCM 2.0 Installation</a>\n","fileAbsolutePath":"/home/travis/build/ibm-cloud-architecture/cloudpak8s/src/pages/mcm/installation/index.mdx"}}}}