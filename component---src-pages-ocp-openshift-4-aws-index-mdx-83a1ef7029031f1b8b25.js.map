{"version":3,"sources":["webpack:///./src/pages/ocp/openshift4_aws/index.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"0eAMO,IAAMA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,KAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,qFACF,mBAAGC,WAAW,KAAQ,CAChB,KAAQ,4GADd,QADE,KAIA,gDACF,mBAAGA,WAAW,KAAQ,CAChB,KAAQ,4GADd,wCADE,gCAKA,sDACF,mBAAGA,WAAW,KAAQ,CAChB,KAAQ,mHADd,mCADE,+BAKA,wJAEA,sBACE,kBAAIA,WAAW,MAAK,mBAAGA,WAAW,MAAS,CACvC,KAAQ,wEADQ,yEAItB,sBAAI,sBAAQA,WAAW,MAAnB,oBACJ,uBAEA,qBAAG,sBAAQA,WAAW,KAAnB,WAAH,gBAA+D,mBAAGA,WAAW,KAAQ,CACjF,KAAQ,iGADmD,uCAA/D,4MAGA,qBAAG,sBAAQA,WAAW,KAAnB,aAAH,KACA,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,WAA+B,mBAAGA,WAAW,KAAQ,CACjD,KAAQ,4CADmB,kBAA/B,IAEgC,kBAAIA,WAAW,KAAf,sCAA0D,0BAAYA,WAAW,MAAvB,+DAA1D,KAFhC,0DAEuQ,mBAAGA,WAAW,KAAQ,CACzR,KAAQ,sDAD2P,8BAFvQ,MAMF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,qCAAyD,0BAAYA,WAAW,KAAvB,uHAE3D,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,wDAA4E,0BAAYA,WAAW,KAAvB,uHAE9E,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,0CAA8D,mBAAGA,WAAW,KAAQ,CAChF,KAAQ,yDADkD,eAA9D,YAEqC,0BAAYA,WAAW,KAAvB,gBAFrC,MAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,mCAAuD,0BAAYA,WAAW,KAAvB,2BAAvD,6BAORJ,EAAWK,gBAAiB","file":"component---src-pages-ocp-openshift-4-aws-index-mdx-83a1ef7029031f1b8b25.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/ibm-cloud-architecture/cloudpak8s/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`Documentation on installing Openshift 4 on AWS can be found\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.openshift.com/container-platform/4.3/installing/installing_aws/installing-aws-account.html\"\n      }}>{`here`}</a>{`.`}</p>\n    <p>{`If possible, using the\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.openshift.com/container-platform/4.3/installing/installing_aws/installing-aws-default.html\"\n      }}>{`installer-provisioned infrastructure`}</a>{`\n(IPI) method is preferred.`}</p>\n    <p>{`For custom requirements, the\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.openshift.com/container-platform/4.3/installing/installing_aws/installing-aws-customizations.html\"\n      }}>{`user-provisioned infrastructure`}</a>{`\n(UPI) method can be used.`}</p>\n    <p>{`If the UPI method must be used, a terraform automation configuration may be\nhelpful. A sample configuration can be found here:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/ibm-cloud-architecture/terraform-openshift4-aws/\"\n        }}>{`https://github.com/ibm-cloud-architecture/terraform-openshift4-aws/`}</a></li>\n    </ul>\n    <h3><strong parentName=\"h3\">{`Troubleshooting`}</strong></h3>\n    <ul>\n    </ul>\n    <p><strong parentName=\"p\">{`Problem`}</strong>{`: When using `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html#encryption-by-default\"\n      }}>{`automatic encryption of EBS volumes`}</a>{` for EC2 instances, OpenShift Worker nodes will be terminated immediately as the generated user does not have the authority to use the default encryption key and the OpenShift installer will time out.`}</p>\n    <p><strong parentName=\"p\">{`Solution:`}</strong>{` `}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add the `}<a parentName=\"p\" {...{\n            \"href\": \"https://console.aws.amazon.com/iam/home\"\n          }}>{`generated user`}</a>{` `}<em parentName=\"p\">{`(whose name will be in the form of `}<inlineCode parentName=\"em\">{`<infrastructureID>-openshift-machine-api-aws-<randomString>`}</inlineCode>{`)`}</em>{` to allow use the default EBS volume encryption key in `}<a parentName=\"p\" {...{\n            \"href\": \"https://us-east-2.console.aws.amazon.com/kms/home\"\n          }}>{`AWS Key Management Service`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Scale Worker MachineSets to 0 via `}<inlineCode parentName=\"p\">{`oc --kubeconfig /path/to/install/dir/auth/kubeconfig scale machineset --all -n openshift-machine-api --replicas=0`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Scale Worker MachineSets back to previous values via `}<inlineCode parentName=\"p\">{`oc --kubeconfig /path/to/install/dir/auth/kubeconfig scale machineset --all -n openshift-machine-api --replicas=1`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Verify Worker nodes are visible in the `}<a parentName=\"p\" {...{\n            \"href\": \"https://us-east-2.console.aws.amazon.com/ec2/v2/home\"\n          }}>{`AWS Console`}</a>{` and via `}<inlineCode parentName=\"p\">{`oc get nodes`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Wait until all Operators in the `}<inlineCode parentName=\"p\">{`oc get clusteroperators`}</inlineCode>{` list are as expected.`}</p>\n      </li>\n    </ol>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}