{"version":3,"sources":["webpack:///./src/pages/integration/cp4i-deploy-mq-2020.1.x/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","InlineNotification","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"2eAMO,IAAMA,EAAe,GAEtBC,EAAgB,SAAAC,GAAI,OAAI,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,2EAC5B,kBAASC,KAGZG,EAAqBL,EAAc,sBACnCM,EAAcN,EAAc,eAC5BO,EAAaP,EAAc,cAC3BQ,EAAc,CAClBT,gBAEIU,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGV,E,oIACF,mBACD,OAAO,YAACO,EAAD,KAAeD,EAAiBN,EAAhC,CAAuCU,WAAYA,EAAYC,QAAQ,cAG5E,YAACR,EAAD,CAAoBQ,QAAQ,sBAC1B,gNAA+L,mBAAGC,WAAW,KAAQ,CACjN,KAAQ,6EADmL,oBAA/L,6CAIF,gIAEA,YAACR,EAAD,CAAaO,QAAQ,eACvB,YAACN,EAAD,CAAYM,QAAQ,cAApB,iCACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,mDACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,6BACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,kCAEE,sBAAI,sBAAQC,WAAW,MAAnB,kCACJ,uEAAsD,0BAAYA,WAAW,KAAvB,MAAtD,iDAEA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,+IAGL,uBAEA,sBAAI,sBAAQA,WAAW,MAAnB,oDACJ,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,mHACN,qBAAKA,WAAW,KAAQ,CACd,IAAO,4DACP,IAAO,wBAGb,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,gFACA,sBAAQA,WAAW,KAAnB,YADA,MAGF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,wEACA,sBAAQA,WAAW,KAAnB,YADA,oDAGF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,mJAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,mTAMF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,sGACwB,0BAAYA,WAAW,KAAvB,uBADxB,MAGF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,iGAEA,mBAAKA,WAAW,MAAK,sBAAMA,WAAW,OAAU,IAA3B,oKAOvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,uDAA2E,sBAAQA,WAAW,KAAnB,iBAA3E,6DAGF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,0CAA8D,sBAAQA,WAAW,KAAnB,MAA9D,oCACC,sBAAQA,WAAW,KAAnB,iBADD,yEAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,mFAEN,qBAAKA,WAAW,KAAQ,CACd,IAAO,mEACP,IAAO,UAGb,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,uFAA2G,0BAAYA,WAAW,KAAvB,YAA3G,iBAEF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,mFAGF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,oIAEN,0BAAYA,WAAW,KAAvB,+CAFM,MAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,WAA+B,0BAAYA,WAAW,KAAvB,qBAA/B,OAAoG,0BAAYA,WAAW,KAAvB,uBAApG,sCACU,sBAAQA,WAAW,KAAnB,sBADV,yEAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,0BAA8C,0BAAYA,WAAW,KAAvB,iCAA9C,gIAE0B,0BAAYA,WAAW,KAAvB,eAF1B,uCAKF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,0BAA8C,0BAAYA,WAAW,KAAvB,OAA9C,OAAqG,0BAAYA,WAAW,KAAvB,kCAArG,eACG,0BAAYA,WAAW,KAAvB,wBADH,6GAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,aAAiC,0BAAYA,WAAW,KAAvB,eAAjC,2FACsC,0BAAYA,WAAW,KAAvB,sBADtC,SAEN,0BAAYA,WAAW,KAAvB,4BAFM,YAIF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,aAAiC,0BAAYA,WAAW,KAAvB,YAAjC,2BAAiH,0BAAYA,WAAW,KAAvB,sBAAjH,2CAC2B,0BAAYA,WAAW,KAAvB,yBAD3B,+EAEmD,0BAAYA,WAAW,KAAvB,oBAFnD,yEAKF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,yOAKF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,0DACN,0BAAYA,WAAW,KAAvB,6BADM,sCAGF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,yHAEN,0BAAYA,WAAW,KAAvB,qCAFM,MAGN,qBAAKA,WAAW,KAAQ,CACd,IAAO,mEACP,IAAO,UAGb,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,0BAA8C,0BAAYA,WAAW,KAAvB,iCAEhD,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,+BAAmD,0BAAYA,WAAW,KAAvB,iCAAnD,qEACiD,0BAAYA,WAAW,KAAvB,aAEnD,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,kDAGJ,uBAEA,sBAAI,sBAAQA,WAAW,MAAnB,8BACJ,sBACE,kBAAIA,WAAW,MAAf,uEACJ,0BAAYA,WAAW,MAAvB,eADI,wCAEJ,qBAAKA,WAAW,MAAS,CACjB,IAAO,6DACP,IAAO,UAGb,uBAEA,sBAAI,sBAAQA,WAAW,MAAnB,kCACJ,sBACE,kBAAIA,WAAW,MAAf,+EACC,0BAAYA,WAAW,MAAvB,0BADD,wGAGA,kBAAIA,WAAW,MAAf,uRAIJ,0BAAYA,WAAW,MAAvB,WACM,qBAAKA,WAAW,MAAS,CACvB,IAAO,kEACP,IAAO,SAEX,kBAAIA,WAAW,MAAf,8BAAmD,0BAAYA,WAAW,MAAvB,UAAnD,mDAEJ,qBAAKA,WAAW,MAAS,CACjB,IAAO,wEACP,IAAO,SAEX,kBAAIA,WAAW,MAAf,gBAAqC,0BAAYA,WAAW,MAAvB,yBAArC,UACA,kBAAIA,WAAW,MAAf,6EACM,0BAAYA,WAAW,MAAvB,WADN,SAEA,kBAAIA,WAAW,MAAf,yJAEJ,qBAAKA,WAAW,MAAS,CACjB,IAAO,sEACP,IAAO,SAEX,kBAAIA,WAAW,MAAf,+BAAoD,0BAAYA,WAAW,MAAvB,MAApD,uBAA2H,0BAAYA,WAAW,MAAvB,MAA3H,gGAGA,kBAAIA,WAAW,MAAf,gFACI,0BAAYA,WAAW,MAAvB,0BADJ,oIASNH,EAAWI,gBAAiB","file":"component---src-pages-integration-cp-4-i-deploy-mq-2020-1-x-index-mdx-ecd9648bf29d7f98c628.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/ibm-cloud-architecture/cloudpak8s/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p>{`Version 2020.2 is out for Cloud Pak for Ingegration.  This version is the first to feature Operators and has significant changes to the deployment and operations.  Please refer to the `}<a parentName=\"p\" {...{\n          \"href\": \"https://www.ibm.com/support/knowledgecenter/en/SSGT7J_20.2/overview.html\"\n        }}>{`Knowledge Center`}</a>{` while we update this playbook.  Thanks!`}</p>\n    </InlineNotification>\n    <p>{`This page provides the guidance for installing MQ for Red Hat\nOpenShift both on-prem and on IBM Cloud.`}</p>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Make sure permissions are set</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Create MQ instance in Cloud Pak for Integration</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Monitoring the Deployment</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Register with Tracing Service</AnchorLink>\n    </AnchorLinks>\n    <h3><strong parentName=\"h3\">{`Make sure permissions are set`}</strong></h3>\n    <p>{`You can open up permissions for install in you `}<inlineCode parentName=\"p\">{`mq`}</inlineCode>{` namespace by issing\nthe following commands:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc adm policy add-scc-to-group ibm-anyuid-scc system:serviceaccounts:mq\noc adm policy add-scc-to-group anyuid system:serviceaccounts:mq\n`}</code></pre>\n    <ul>\n    </ul>\n    <h3><strong parentName=\"h3\">{`Create MQ instance in Cloud Pak for Integration`}</strong></h3>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create an instance of MQ queue manager by clicking on “Add new instance” in the MQ tile in Platform Navigator.\n`}<img parentName=\"p\" {...{\n            \"src\": \"/assets/img/integration/deploy-queue-manager/5.mq-nav.png\",\n            \"alt\": \"Add New Instance\"\n          }}></img></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`This will open a pop up window showing requirements for deploying MQ.\nClick `}<strong parentName=\"p\">{`Continue`}</strong>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`This will open the MQ helm chart to deploy MQ to the cluster.\nClick `}<strong parentName=\"p\">{`Overview`}</strong>{` to review the requirements to deploy MQ chart.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Unless you require fine grained rights to be defined for your\ninstallation, the default rbac settings defined on install will be\nsufficient.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`MQ also requires Storage class or Persistent volume to be pre-defined\nif persistence is being used. It is possible to deploy MQ chart without\nusing persistence. However, it is highly recommended to use persistent\nstorage as any changes you make in the MQ UI will be lost if the pods were\nrecreated.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`If you are using the entitled registry, your image pull secret will\nalready be created for you as `}<inlineCode parentName=\"p\">{`ibm-entitlement-key`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`If you are not using entitled registry, obtain an image pull secret\nusing the command below:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`To obtain the secret for pulling the image login to the OCP CLI and run:\n\\`\\`\\`\noc get secrets -n mq\n\\`\\`\\`\nThe pull secret starts with **deployer-dockercfg**\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`After performing the above pre-requisites, click on `}<strong parentName=\"p\">{`Configuration`}</strong>{`\ntab to provide the values required to deploy MQ chart.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Provide the name for the chart, select `}<strong parentName=\"p\">{`mq`}</strong>{` as Target namespace and\nselect `}<strong parentName=\"p\">{`local-cluster`}</strong>{` as Target-Cluster. Also check the ‘License’ box\nto accept license.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Expand the ‘Quick Start’ twisty to expose the Configuration Settings\nfor TLS.\n`}<img parentName=\"p\" {...{\n            \"src\": \"/assets/img/integration/deploy-queue-manager/6.mq-quickstart.png\",\n            \"alt\": null\n          }}></img></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Set the Cluster Hostname as the proxy node address for your installation.  Omit the `}<inlineCode parentName=\"p\">{`https://`}</inlineCode>{` in the url.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Next, click to expand ‘All parameters’ to configure the chart for\ndeployment.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Untickthe box “Production usage” box.  Double check your image\nrepository is correct.  For entitled registry it will look like\n`}<inlineCode parentName=\"p\">{`cp.icr.io/ibm-mqadvanced-server-integration`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Set the `}<inlineCode parentName=\"p\">{`Image Pull Secret`}</inlineCode>{` to `}<inlineCode parentName=\"p\">{`ibm-entitlement-key`}</inlineCode>{` for the entitled\nregistry or the `}<strong parentName=\"p\">{`deployer-dockercfg`}</strong>{` value specific to your environment\nas indicated in the step above.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Moving down, under the `}<inlineCode parentName=\"p\">{`IBM Cloud Pak for Integration`}</inlineCode>{` heading it will\nask for the location of your platform navigator is installed at.  In most\ninstallations, this will be the `}<inlineCode parentName=\"p\">{`integration`}</inlineCode>{` namespace, but check to be\nsure.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Moving down, under the `}<inlineCode parentName=\"p\">{`TLS`}</inlineCode>{` -> `}<inlineCode parentName=\"p\">{`Configuration Settings for TLS`}</inlineCode>{`.\nTick the `}<inlineCode parentName=\"p\">{`Generate Certificate`}</inlineCode>{` box. The cluster hostname value should\nalready be populated with the proxy node value defined earlier.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Under the `}<inlineCode parentName=\"p\">{`Persistence`}</inlineCode>{` heading.  If you choose to use persistent\nstorage then you will need to tick both the `}<inlineCode parentName=\"p\">{`Enable persistence`}</inlineCode>{` and\n`}<inlineCode parentName=\"p\">{`Use dynamic provisioning`}</inlineCode>{` boxes.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Under the `}<inlineCode parentName=\"p\">{`Data PVC`}</inlineCode>{` heading.  Populate the `}<inlineCode parentName=\"p\">{`Storage Class name`}</inlineCode>{` with\nthe requisite storageclass.  Use `}<inlineCode parentName=\"p\">{`oc get storageclasses`}</inlineCode>{` to get a list on\nyour system.  If you are using IBM Cloud this can be the `}<inlineCode parentName=\"p\">{`ibmc-file-bronze`}</inlineCode>{`.\nEither way, file storage (not block) is required for use with MQ.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`There is no need to repeat this for the other sections (Log PVC and QM\nPVC etc) for a dev environment.  If you want to use a separate storage\nclass for these items, you can individually specify the storageclasses as\nrequired.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Moving down, under Security, ensure the check box for\n`}<inlineCode parentName=\"p\">{`Initialize volume as root`}</inlineCode>{` is ticked.  This is the default.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Last item to configure is to enable OD Tracing for the MQ instance.\nAt the bottom of the MQ Chart you will find the\n`}<inlineCode parentName=\"p\">{`Operation Dashboard Configuration`}</inlineCode>{`.\n`}<img parentName=\"p\" {...{\n            \"src\": \"/assets/img/integration/deploy-queue-manager/11.tracingchart.png\",\n            \"alt\": null\n          }}></img></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click the Tick Box for `}<inlineCode parentName=\"p\">{`Enable Operations Dashboard`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`At the bottom, populate the `}<inlineCode parentName=\"p\">{`OD tracing instance namespace`}</inlineCode>{` with the\nname of the tracing namespace, which in this sample is `}<inlineCode parentName=\"p\">{`tracing`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Scroll to the bottom and then click install.`}</p>\n      </li>\n    </ol>\n    <ul>\n    </ul>\n    <h3><strong parentName=\"h3\">{`Monitoring the Deployment`}</strong></h3>\n    <ol>\n      <li parentName=\"ol\">{`Once all the pods are up, it will resemble the following.  Use the\n`}<inlineCode parentName=\"li\">{`oc get pods`}</inlineCode>{` command to view the pods in flight\n`}<img parentName=\"li\" {...{\n          \"src\": \"/assets/img/integration/deploy-queue-manager/12.mqpods.png\",\n          \"alt\": null\n        }}></img></li>\n    </ol>\n    <ul>\n    </ul>\n    <h3><strong parentName=\"h3\">{`Register with Tracing Service`}</strong></h3>\n    <ol>\n      <li parentName=\"ol\">{`Near the end of the install of MQ, a job will be created that has the\nname `}<inlineCode parentName=\"li\">{`odtracing.registration`}</inlineCode>{`.  This job will not complete until the\nRegistration is completed inside of the Tracing capability.`}</li>\n      <li parentName=\"ol\">{`What will happen is that a request will be created inside of tracing\nthat you need to act upon.  Navigate to the Platform Navigator and via\nthe Hamburger menu select Tracing and then when the window pops out\nselect the name of your tracing instance which should be called\n`}<inlineCode parentName=\"li\">{`tracing`}</inlineCode>\n        <img parentName=\"li\" {...{\n          \"src\": \"/assets/img/integration/deploy-queue-manager/13.tracing-nav.png\",\n          \"alt\": null\n        }}></img></li>\n      <li parentName=\"ol\">{`Within tracing, select the `}<inlineCode parentName=\"li\">{`Manage`}</inlineCode>{` icon from the menu.  Looks like a\ncog wheel.\n`}<img parentName=\"li\" {...{\n          \"src\": \"/assets/img/integration/deploy-queue-manager/14.tracing-from-menu.png\",\n          \"alt\": null\n        }}></img></li>\n      <li parentName=\"ol\">{`Click on the `}<inlineCode parentName=\"li\">{`Registration Requests`}</inlineCode>{` icon.`}</li>\n      <li parentName=\"ol\">{`You should see a new registration request for your MQ install.\nClick the `}<inlineCode parentName=\"li\">{`approve`}</inlineCode>{` link`}</li>\n      <li parentName=\"ol\">{`You will see a pop up window with some lines to copy to your clipboard.\nClick the 2 boxes icon in the top right icon to copy the commands required.\n`}<img parentName=\"li\" {...{\n          \"src\": \"/assets/img/integration/deploy-queue-manager/15.process-request.png\",\n          \"alt\": null\n        }}></img></li>\n      <li parentName=\"ol\">{`Ensuring you have an active `}<inlineCode parentName=\"li\">{`oc`}</inlineCode>{` session and in the `}<inlineCode parentName=\"li\">{`mq`}</inlineCode>{` project.\nPaste the commands to the window and it will run then and finish the\nprocessing.`}</li>\n      <li parentName=\"ol\">{`If you are slow in doing the steps above.  It is possible you might\nsee the `}<inlineCode parentName=\"li\">{`odtracing.registration`}</inlineCode>{` job fail.  No worries.  Once you complete\nthe pasting of the commands to create your secret, the job will re-create\nitself.`}</li>\n    </ol>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}