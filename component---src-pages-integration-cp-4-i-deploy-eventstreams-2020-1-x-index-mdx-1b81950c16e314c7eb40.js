(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{M7Nj:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return i})),n.d(t,"default",(function(){return u}));n("91GP"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("q1tI");var a=n("7ljp"),r=n("013z");n("qKvR");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i={},l=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(a.b)("div",t)}},c=l("InlineNotification"),p=l("AnchorLinks"),b=l("AnchorLink"),s={_frontmatter:i},m=r.a;function u(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(m,o({},s,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)(c,{mdxType:"InlineNotification"},Object(a.b)("p",null,"Version 2020.2 is out for Cloud Pak for Ingegration.  This version is the first to feature Operators and has significant changes to the deployment and operations.  Please refer to the ",Object(a.b)("a",o({parentName:"p"},{href:"https://www.ibm.com/support/knowledgecenter/en/SSGT7J_20.2/overview.html"}),"Knowledge Center")," while we update this playbook.  Thanks!")),Object(a.b)(p,{mdxType:"AnchorLinks"},Object(a.b)(b,{mdxType:"AnchorLink"},"Introduction"),Object(a.b)(b,{mdxType:"AnchorLink"},"Prepare Installation"),Object(a.b)(b,{mdxType:"AnchorLink"},"Begin Installation"),Object(a.b)(b,{mdxType:"AnchorLink"},"Validate Installation")),Object(a.b)("h3",null,Object(a.b)("strong",{parentName:"h3"},"Introduction")),Object(a.b)("p",null,"This page contains guidance on how to configure the Event Streams release\nfor both on-prem and IBM Cloud."),Object(a.b)("ul",null),Object(a.b)("h3",null,Object(a.b)("strong",{parentName:"h3"},"Prepare Installation")),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},Object(a.b)("strong",{parentName:"p"},"Change project to eventstreams")),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",o({parentName:"pre"},{}),"oc project eventstreams\n"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},Object(a.b)("strong",{parentName:"p"},"Resources Required:")),Object(a.b)("p",{parentName:"li"},"If you enable message indexing (which is enabled by default), then\nyou must have the vm.max_map_count property set to at least 262144 on\nall IBM Cloud Private nodes in your cluster (not only the master node).\nPlease note this property may have already been updated by other\nworkloads to be higher than the minimum required. Run the following\ncommands on each node:"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",o({parentName:"pre"},{}),'sudo sysctl -w vm.max_map_count=262144\n\necho "vm.max_map_count=262144" | tee -a /etc/sysctl.conf\n')))),Object(a.b)("p",null,"You also may want to consider manually setting security if you run into\nissues related to permissions.  This applies to non-production/poc type\nenvironments where you need to get things up and running quickly.\nHere are the commands:"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{}),"oc adm policy add-scc-to-group anyuid system:serviceaccounts:eventstreams\noc adm policy add-scc-to-group ibm-anyuid-scc system:serviceaccounts:eventstreams\n")),Object(a.b)("p",null,"This assumes you are installing to the eventstreams namespace/project.\nIf you are using a different location, adjust the last parameter to match\nyour environment."),Object(a.b)("ul",null),Object(a.b)("h3",null,Object(a.b)("strong",{parentName:"h3"},"Begin Installation")),Object(a.b)(c,{mdxType:"InlineNotification"},"In creating the Helm chart for the Event Streams installation, you need to specify a File System Group ID or you will see a permissions error for one of the pods. You can configure a Group ID of 1000 or another value."),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Go to CP4I Platform Home. Click ",Object(a.b)("strong",{parentName:"p"},"Create instance")," inside\nthe ",Object(a.b)("strong",{parentName:"p"},"Event Streams")," tile.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"A window will pop up with a description of the requirements for\ninstalling. Click ",Object(a.b)("strong",{parentName:"p"},"Continue")," to the helm chart deployment configuration.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Click ",Object(a.b)("strong",{parentName:"p"},"Overview")," to view the chart information and pre-reqs that\nwere covered in ",Object(a.b)("a",o({parentName:"p"},{href:"#prepare-installation"}),"Prepare Installation"),".")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Click ",Object(a.b)("strong",{parentName:"p"},"Configure"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Enter the Helm release name. In our example, ",Object(a.b)("strong",{parentName:"p"},"es-1"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Enter Target Namespace - ",Object(a.b)("strong",{parentName:"p"},"eventstreams"))),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Select a Cluster - ",Object(a.b)("strong",{parentName:"p"},"local-cluster"),".")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Check the license agreement.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Under Parameter click ",Object(a.b)("strong",{parentName:"p"},"Quick Start")," to expand.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Here you will need to set the ",Object(a.b)("inlineCode",{parentName:"p"},"Certificate Secret Name"),".  Set this to a\nsimple value like ",Object(a.b)("inlineCode",{parentName:"p"},"eventstreamssecret"),".")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Image Pull Secret - Set to ",Object(a.b)("inlineCode",{parentName:"p"},"ibm-entitlement-key")," if using entitled\nregistry or if offline use the ",Object(a.b)("inlineCode",{parentName:"p"},"deployer-dockercfg-XX")," secret in your ace\nnamespace.  Use ",Object(a.b)("inlineCode",{parentName:"p"},"oc get secrets")," to get the exact value for your\nenvironment.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Under ",Object(a.b)("inlineCode",{parentName:"p"},"External Access Settings")," find the ",Object(a.b)("inlineCode",{parentName:"p"},"External hostname/IP address")," and set that to the icp-proxy address defined during icp / common-services installation - icp-proxy.\\","<","openshift-router-domain",">")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Under Parameters click ",Object(a.b)("strong",{parentName:"p"},"All Parameters")," to expand.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"Under ",Object(a.b)("inlineCode",{parentName:"p"},"Global install settings")," ensure the ",Object(a.b)("inlineCode",{parentName:"p"},"Generate Certificate for Security")," checked.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"There are other settings you might consider adding, like persistent\nstorage.  It is not required for install but if you wish to add it, the\nchart will allow for it.  Event Streams requires block storage.")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("p",{parentName:"li"},"If you do not wish to add persistent storage, you are done.  Scroll to\nthe bottom. Click ",Object(a.b)("strong",{parentName:"p"},"Install"),"."))),Object(a.b)("ul",null),Object(a.b)("h3",null,Object(a.b)("strong",{parentName:"h3"},"Validate Installation")),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"View all pods in a running state and jobs completed\n",Object(a.b)("img",o({parentName:"li"},{src:"/assets/img/integration/deploy-eventstreams/7.es-pods.png",alt:null})))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-integration-cp-4-i-deploy-eventstreams-2020-1-x-index-mdx-1b81950c16e314c7eb40.js.map