(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{mlIp:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return i})),n.d(t,"default",(function(){return u}));n("91GP"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("q1tI");var a=n("7ljp"),o=n("013z");n("qKvR");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i={},l=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(a.b)("div",t)}},s=l("InlineNotification"),c=l("AnchorLinks"),b=l("AnchorLink"),p={_frontmatter:i},m=o.a;function u(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["components"]);return Object(a.b)(m,r({},p,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)(s,{mdxType:"InlineNotification"},Object(a.b)("p",null,"Version 2020.2 is out for Cloud Pak for Ingegration.  This version is the first to feature Operators and has significant changes to the deployment and operations.  Please refer to the ",Object(a.b)("a",r({parentName:"p"},{href:"https://www.ibm.com/support/knowledgecenter/en/SSGT7J_20.2/overview.html"}),"Knowledge Center")," while we update this playbook.  Thanks!")),Object(a.b)(c,{mdxType:"AnchorLinks"},Object(a.b)(b,{mdxType:"AnchorLink"},"Introduction"),Object(a.b)(b,{mdxType:"AnchorLink"},"Prepare Installation"),Object(a.b)(b,{mdxType:"AnchorLink"},"Begin Installation"),Object(a.b)(b,{mdxType:"AnchorLink"},"Validate installation")),Object(a.b)("h3",null,Object(a.b)("strong",{parentName:"h3"},"Introduction")),Object(a.b)("p",null,"This page contains guidance on how to configure the Asset Repository\nrelease for both on-prem and IBM Cloud."),Object(a.b)("ul",null),Object(a.b)("h3",null,Object(a.b)("strong",{parentName:"h3"},"Prepare Installation")),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"You have a few choices on where you can deploy the Asset Repository.\nYou can either deploy it to the ",Object(a.b)("inlineCode",{parentName:"li"},"integration")," namespace or wherever your\nplatform navigator is installed, or in some cases (like IBM Cloud) where a\nseparate namespace will be created for the asset repository."),Object(a.b)("li",{parentName:"ol"},"The Asset Repository Requires the use of persistent storage, like\ngluster-fs and/or ceph.  Note that there are some parts of the Asset Repo\nthat work better with block storage (like Cloudant).  These will be called\nout in the installation instructions below."),Object(a.b)("li",{parentName:"ol"},"To use the remote syncing capability into github, a publically facing\ngithub account is required.  More info on this can be found\n",Object(a.b)("a",r({parentName:"li"},{href:"https://www.ibm.com/support/knowledgecenter/SSGT7J_19.4/asset_repo.html"}),"here"),"."),Object(a.b)("li",{parentName:"ol"},"Note that the default replica set size for the install for all of the\nasset repo components is 3.  For POC/Dev type systems, you can scale these\nback to one replica to save resources.  However note this is ",Object(a.b)("em",{parentName:"li"},"NOT"),"\nrecommended for production systems."),Object(a.b)("li",{parentName:"ol"},"You might need to add permissions for your namespace, depending on\nwhere you are installing the asset repository.  Use the following commands\nand replace the last ","<","namespace",">"," argument with your targeted\nnamespace.  If you are installing this into the same namespace where the\nplatform navigator is located, use that namespace (e.g. ",Object(a.b)("inlineCode",{parentName:"li"},"integration"),").")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{}),"oc adm policy add-scc-to-group ibm-anyuid-scc system:serviceaccounts:&lt;namespace&gt;\n")),Object(a.b)("ul",null),Object(a.b)("h3",null,Object(a.b)("strong",{parentName:"h3"},"Begin Installation")),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Go to CP4I Platform Home. Click ",Object(a.b)("strong",{parentName:"li"},"Create Instance")," inside\nthe ",Object(a.b)("strong",{parentName:"li"},"Asset Repo")," tile."),Object(a.b)("li",{parentName:"ol"},"A window will pop up with a description of the requirements for\ninstalling. Click ",Object(a.b)("strong",{parentName:"li"},"Continue")," to the helm chart deployment configuration."),Object(a.b)("li",{parentName:"ol"},"Click ",Object(a.b)("strong",{parentName:"li"},"Overview")," to view the chart information and pre-reqs."),Object(a.b)("li",{parentName:"ol"},"Click ",Object(a.b)("strong",{parentName:"li"},"Configure")),Object(a.b)("li",{parentName:"ol"},"Enter the Helm release name. In our example, ",Object(a.b)("strong",{parentName:"li"},"asset-repo")),Object(a.b)("li",{parentName:"ol"},"Enter Target Namespace.  As indicated above, this can be in\nthe ",Object(a.b)("inlineCode",{parentName:"li"},"integration")," namespace or another namespace setup for you."),Object(a.b)("li",{parentName:"ol"},"Select a Cluster - ",Object(a.b)("strong",{parentName:"li"},"local-cluster"),"."),Object(a.b)("li",{parentName:"ol"},"Tick the license agreement box."),Object(a.b)("li",{parentName:"ol"},"Under Parameters -> Quick start\na. Hostname of the ingress proxy to be configured - This will be your\nproxy node for your install."),Object(a.b)("li",{parentName:"ol"},"Click All Parameters twisty"),Object(a.b)("li",{parentName:"ol"},"Image Pull Secret -> Set to ",Object(a.b)("inlineCode",{parentName:"li"},"ibm-entitlement-key")," if using entitled\nregistry or if offline use the ",Object(a.b)("inlineCode",{parentName:"li"},"deployer-dockercfg-XX")," secret in your\nace namespace.  Use ",Object(a.b)("inlineCode",{parentName:"li"},"oc get secrets")," to get the exact value for your\nenvironment."),Object(a.b)("li",{parentName:"ol"},"Untick the ",Object(a.b)("inlineCode",{parentName:"li"},"Production usage")," checkbox."),Object(a.b)("li",{parentName:"ol"},"Double check that the ",Object(a.b)("inlineCode",{parentName:"li"},"Platform Navigator Namespace")," is set properly\nfor your environment."),Object(a.b)("li",{parentName:"ol"},"For ",Object(a.b)("inlineCode",{parentName:"li"},"Cloudant metadata store storage class")," set that value to your\nblock storageclass.  Non-block will work fine here too, but block will\ndefinitely be faster."),Object(a.b)("li",{parentName:"ol"},"As you go through the chart, you can scale down the replicas\nfor ",Object(a.b)("inlineCode",{parentName:"li"},"Cloudant"),", ",Object(a.b)("inlineCode",{parentName:"li"},"Catalog API"),", ",Object(a.b)("inlineCode",{parentName:"li"},"DC main"),", ",Object(a.b)("inlineCode",{parentName:"li"},"Portal Catalog"),",\n",Object(a.b)("inlineCode",{parentName:"li"},"Asset Storage"),", ",Object(a.b)("inlineCode",{parentName:"li"},"Portal Common")," and ",Object(a.b)("inlineCode",{parentName:"li"},"Catalog Remotes")," from 3 to 1."),Object(a.b)("li",{parentName:"ol"},"Be sure to also set the ",Object(a.b)("inlineCode",{parentName:"li"},"Asset storage Storage Class")," and\n",Object(a.b)("inlineCode",{parentName:"li"},"Catalog remotes Storage Class")," to your non-block storage."),Object(a.b)("li",{parentName:"ol"},"Scroll down and then Click ",Object(a.b)("strong",{parentName:"li"},"Install")," to fire off the chart\ninstallation")),Object(a.b)("ul",null),Object(a.b)("h3",null,Object(a.b)("strong",{parentName:"h3"},"Validate installation")),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Here is a representation of all pods running\n",Object(a.b)("img",r({parentName:"li"},{src:"/assets/img/integration/deploy-asset-repo/16.asset-repo-pods.png",alt:null})))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-integration-cp-4-i-deploy-asset-repo-2020-1-x-index-mdx-6d6689bcdb4088c4b480.js.map